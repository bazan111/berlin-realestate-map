<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Berlin Real Estate Map 2025</title>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>
    <style>
        body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
        #info-panel { position: absolute; top: 20px; right: 20px; width: 350px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.2); max-height: 80vh; overflow-y: auto; }
        h2 { margin-top: 0; color: #333; }
        .district-item { padding: 10px; margin: 10px 0; background: #f8f9fa; border-radius: 5px; cursor: pointer; }
        .district-item:hover { background: #e9ecef; }
        .price { font-weight: bold; color: #28a745; }
        .legend { margin-top: 20px; padding-top: 20px; border-top: 1px solid #dee2e6; }
        .legend-item { display: flex; align-items: center; margin: 5px 0; }
        .legend-color { width: 20px; height: 20px; border-radius: 50%; margin-right: 10px; }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="info-panel">
        <h2>Berlin Real Estate 2025</h2>
        <p>Цены на недвижимость по районам (GUTHMANN 2025)</p>
        <div id="district-list"></div>
        <div class="legend">
            <h3>Легенда:</h3>
            <div class="legend-item"><div class="legend-color" style="background: #dc3545;"></div>€6000+/м²</div>
            <div class="legend-item"><div class="legend-color" style="background: #fd7e14;"></div>€5000-6000/м²</div>
            <div class="legend-item"><div class="legend-color" style="background: #ffc107;"></div>€4000-5000/м²</div>
            <div class="legend-item"><div class="legend-color" style="background: #28a745;"></div><€4000/м²</div>
        </div>
    </div>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiYmF6YW4xMTEiLCJhIjoiY20wamZkNnd5MGduNzJrcXd4aHdidGVsbSJ9.Wso7apo98Cs5kHuN_jvUVw';
        
        const districts = [
            { name: 'Mitte', lat: 52.5200, lng: 13.4050, price: 6500 },
            { name: 'Charlottenburg', lat: 52.5194, lng: 13.2889, price: 5800 },
            { name: 'Pankow', lat: 52.5688, lng: 13.4010, price: 4500 },
            { name: 'Friedrichshain', lat: 52.5145, lng: 13.4531, price: 5200 },
            { name: 'Tempelhof', lat: 52.4675, lng: 13.3903, price: 4800 },
            { name: 'Steglitz', lat: 52.4567, lng: 13.3264, price: 4200 },
            { name: 'Neukölln', lat: 52.4817, lng: 13.4394, price: 3800 },
            { name: 'Treptow', lat: 52.4904, lng: 13.4694, price: 4100 },
            { name: 'Marzahn', lat: 52.5433, lng: 13.5733, price: 2900 },
            { name: 'Lichtenberg', lat: 52.5162, lng: 13.4780, price: 3500 },
            { name: 'Reinickendorf', lat: 52.5720, lng: 13.3384, price: 3700 },
            { name: 'Spandau', lat: 52.5351, lng: 13.1999, price: 3400 }
        ];
        
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v12',
            center: [13.4050, 52.5200],
            zoom: 10
        });
        
        function getColor(price) {
            if (price >= 6000) return '#dc3545';
            if (price >= 5000) return '#fd7e14';
            if (price >= 4000) return '#ffc107';
            return '#28a745';
        }
        
        map.on('load', () => {
            districts.forEach(district => {
                const el = document.createElement('div');
                el.style.width = '30px';
                el.style.height = '30px';
                el.style.borderRadius = '50%';
                el.style.backgroundColor = getColor(district.price);
                el.style.border = '3px solid white';
                el.style.boxShadow = '0 2px 8px rgba(0,0,0,0.3)';
                el.style.cursor = 'pointer';
                
                new mapboxgl.Marker(el)
                    .setLngLat([district.lng, district.lat])
                    .setPopup(new mapboxgl.Popup({ offset: 25 })
                        .setHTML(`<h3>${district.name}</h3><p class="price">€${district.price}/м²</p>`))
                    .addTo(map);
            });
        });
        
        const districtList = document.getElementById('district-list');
        districts.sort((a, b) => b.price - a.price).forEach(district => {
            const item = document.createElement('div');
            item.className = 'district-item';
            item.innerHTML = `<strong>${district.name}</strong><br><span class="price">€${district.price}/м²</span>`;
            item.onclick = () => {
                map.flyTo({ center: [district.lng, district.lat], zoom: 13, duration: 1500 });
            };
            districtList.appendChild(item);
        });
    </script>
</body>
</html>
